<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì›¹ ì„œë²„ êµ¬ì¡° ì‹œê°í™”</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>âœ¨</text></svg>">
  <style>
    body {
      font-family: Pretendard, sans-serif;
      background: #f4f6fa;
      margin: 0;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2rem;
    }

    .container {
      display: flex;
      gap: 2rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    .box {
      width: 340px;
      min-height: 220px;
      background: white;
      padding: 1rem;
      border-radius: 12px;
      transition: box-shadow 0.3s ease;
    }

    .box:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .title {
      font-weight: bold;
      margin-bottom: 0.5rem;
    }

    select {
      width: 100%;
      margin-top: 0.5rem;
      padding: 0.5rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      resize: vertical;
    }
    input[type="text"] {
      margin-top: 0.5rem;
      padding: 0.5rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      resize: vertical;
    }
    textarea {
      width: 95%;
      margin-top: 0.5rem;
      padding: 0.5rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      resize: vertical;
    }
    
    #refreshButton {
		background-color: #4a90e2;
		color: white;
		border: none;
		border-radius: 6px;
		padding: 10px 20px;
		font-size: 16px;
		font-weight: 500;
		cursor: pointer;
		box-shadow: 0 2px 5px rgba(0,0,0,0.1);
		transition: background-color 0.3s, transform 0.2s;
	}

	#refreshButton:hover {
		background-color: #3a78c2;
		transform: translateY(-2px);
	}

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 0.5rem;
    }

    th, td {
      padding: 0.4rem;
      border-bottom: 1px solid #ddd;
      text-align: center;
    }

    .arrow {
      font-size: 2rem;
      color: #aaa;
      margin: 0 1rem;
    }

    .browser {
      width: 80%;
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      overflow: hidden;
    }

    .browser-header {
      background: #e0e0e0;
      padding: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .browser-buttons {
      display: flex;
      gap: 0.4rem;
    }

    .browser-button {
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }

    .close { background: #ff5f57; }
    .minimize { background: #ffbd2e; }
    .maximize { background: #28c840; }

    .browser-url {
      flex-grow: 1;
      margin-left: 1rem;
      margin-right: 1rem;
      background: white;
      border: 1px solid #ccc;
      padding: 0.2rem 0.5rem;
      border-radius: 6px;
      font-size: 0.9rem;
    }

    .browser-content {
      padding: 1rem;
    }
    
    .grid-box {
		display: grid;
		gap: 5px;
    }
    .grid-box.col50 {
		grid-template-columns: 50% 50%;
    }
    .code-box {
		background-color: #222222;
		color: #FFFFFF;
		padding: 8px;
		border-radius: 5px;
    }
  </style>
</head>
<body>
  <h1>ì›¹ ì„œë²„ íë¦„ ì´í•´í•˜ê¸° âœ…</h1>
  <div class="container">
    <div class="box">
      <div class="title">Web Server</div>
      <div style="font-size: 14px;" class="grid-box code-box">
		  <div>&lt;header&gt;<input id="fe_title" type="text" placeholder="ì œëª©" value="ì œí’ˆ ëª©ë¡ ğŸ"/>&lt;/header&gt;</div>
		  <div>&lt;caption&gt;<textarea id="fe_caption" type="text" placeholder="ì„¤ëª…" rows="2" style="resize:none;">ì œí’ˆ ëª©ë¡ì„ í™•ì¸í•˜ì„¸ìš”</textarea>&lt;/caption&gt;</div>
		  <div>&lt;datatable&gt;
		  <br/>
		  # API ì„œë²„ì—ì„œ ì¡°íšŒí•˜ê¸°
		  <br/>
		  getResponseFrom(<input id="fe_api" type="text" placeholder="API" />);
		  <br/>
		  &lt;/datatable&gt;</div>
      </div>
    </div>
    <div class="arrow">âŸ¶</div>
    <div class="box">
      <div class="title">WAS</div>
      <div class="grid-box col50">
		  <input id="apiInput1" type="text" placeholder="ì˜ˆ: /user/" value="/user/" />
		  <select id="apiSelect1">
			<option value="users" selected>íšŒì› ì •ë³´ ì¡°íšŒ</option>
			<option value="products">ì œí’ˆ ëª©ë¡ ì¡°íšŒ</option>
			<option value="orders">ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ</option>
			<option value="reviews">ê³ ê° ë¦¬ë·° ì¡°íšŒ</option>
		  </select>
      </div>
      <div class="grid-box col50">
		  <input id="apiInput2" type="text" placeholder="ì˜ˆ: /user/" value="/product/" />
		  <select id="apiSelect2">
			<option value="users">íšŒì› ì •ë³´ ì¡°íšŒ</option>
			<option value="products" selected>ì œí’ˆ ëª©ë¡ ì¡°íšŒ</option>
			<option value="orders">ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ</option>
			<option value="reviews">ê³ ê° ë¦¬ë·° ì¡°íšŒ</option>
		  </select>
      </div>
      <div class="grid-box col50">
		  <input id="apiInput3" type="text" placeholder="ì˜ˆ: /user/" value="/order/" />
		  <select id="apiSelect3">
			<option value="users">íšŒì› ì •ë³´ ì¡°íšŒ</option>
			<option value="products">ì œí’ˆ ëª©ë¡ ì¡°íšŒ</option>
			<option value="orders" selected>ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ</option>
			<option value="reviews">ê³ ê° ë¦¬ë·° ì¡°íšŒ</option>
		  </select>
      </div>
      <div class="grid-box col50">
		  <input id="apiInput4" type="text" placeholder="ì˜ˆ: /user/" value="/review/" />
		  <select id="apiSelect4">
			<option value="users">íšŒì› ì •ë³´ ì¡°íšŒ</option>
			<option value="products">ì œí’ˆ ëª©ë¡ ì¡°íšŒ</option>
			<option value="orders">ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ</option>
			<option value="reviews" selected>ê³ ê° ë¦¬ë·° ì¡°íšŒ</option>
		  </select>
      </div>
    </div>
    <div class="arrow">âŸ¶</div>
    <div class="box">
      <div class="title">Database</div>
      <select id="dbSelect" onchange="renderDBTable()">
        <option value="users">íšŒì› ëª©ë¡</option>
        <option value="products">ì œí’ˆ ëª©ë¡</option>
        <option value="orders">ì£¼ë¬¸ ë‚´ì—­</option>
        <option value="reviews">ê³ ê° ë¦¬ë·°</option>
      </select>
      <table>
        <thead id="dbHead"></thead>
        <tbody id="dbTable"></tbody>
      </table>
    </div>
  </div>
  <div>
	<button id="refreshButton" onclick="refreshBrowser()">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
  </div>
  <div class="browser">
    <div class="browser-header">
      <div class="browser-buttons">
        <div class="browser-button close"></div>
        <div class="browser-button minimize"></div>
        <div class="browser-button maximize"></div>
      </div>
      <div class="browser-url">www.example.com</div>
    </div>
    <div class="browser-content" id="output"></div>
  </div>

  <script>

    const dbMock = {
      users: [
        { ID: 1, ì´ë¦„: "Alice", ì—°ë ¹: 33 },
        { ID: 2, ì´ë¦„: "Bob", ì—°ë ¹: 45 },
        { ID: 3, ì´ë¦„: "Charlie", ì—°ë ¹: 21 },
        { ID: 4, ì´ë¦„: "Diana", ì—°ë ¹: 62 }
      ],
      products: [
        { ID: 101, ì œí’ˆëª…: "ë…¸íŠ¸ë¶", ì„ í˜¸ë„: "ìƒ", ê°€ê²©: 2500000 },
        { ID: 102, ì œí’ˆëª…: "ë§ˆìš°ìŠ¤", ì„ í˜¸ë„: "ì¤‘", ê°€ê²©: 56000 },
        { ID: 103, ì œí’ˆëª…: "í‚¤ë³´ë“œ", ì„ í˜¸ë„: "í•˜", ê°€ê²©: 67500 },
        { ID: 104, ì œí’ˆëª…: "ëª¨ë‹ˆí„°", ì„ í˜¸ë„: "ì¤‘", ê°€ê²©: 670000 }
      ],
      orders: [
        { ì£¼ë¬¸ë²ˆí˜¸: "A001", ìƒíƒœ: "ë°°ì†¡ ì¤‘" },
        { ì£¼ë¬¸ë²ˆí˜¸: "A002", ìƒíƒœ: "ë°°ì†¡ ì™„ë£Œ" },
        { ì£¼ë¬¸ë²ˆí˜¸: "A003", ìƒíƒœ: "ê²°ì œ ëŒ€ê¸°" },
        { ì£¼ë¬¸ë²ˆí˜¸: "A004", ìƒíƒœ: "ì£¼ë¬¸ ì·¨ì†Œ" }
      ],
      reviews: [
        { ë¦¬ë·°ID: 1, ë‚´ìš©: "ì•„ì£¼ ì¢‹ì•„ìš”" },
        { ë¦¬ë·°ID: 2, ë‚´ìš©: "ë³´í†µì´ì—ìš”" },
        { ë¦¬ë·°ID: 3, ë‚´ìš©: "ë³„ë¡œì˜ˆìš”" },
        { ë¦¬ë·°ID: 4, ë‚´ìš©: "ë§Œì¡±í•©ë‹ˆë‹¤" }
      ]
    };

    function renderTable(data, type, head, body, isEditable=false) {
      head.innerHTML = "";
      body.innerHTML = "";

      if (data.length > 0) {
        // í—¤ë” ì„¤ì •
        const headers = Object.keys(data[0]);
        const tr = document.createElement("tr");
        headers.forEach(h => {
          const th = document.createElement("th");
          if (isEditable) {
			th.textContent = h;
          } else {
			th.textContent = h;
          }
          tr.appendChild(th);
        });
        //const th = document.createElement("th");
        //th.textContent = "ìˆ˜ì •";
        //tr.appendChild(th);
        head.appendChild(tr);

        // ë³¸ë¬¸ ì„¤ì •
        data.forEach((row, rowIndex) => {
          const tr = document.createElement("tr");
          headers.forEach(h => {
            const td = document.createElement("td");
            td.textContent = row[h];
            if (isEditable) {
				td.contentEditable = true;
				td.oninput = () => {
				  dbMock[type][rowIndex][h] = td.textContent;
				};
            }
            tr.appendChild(td);
          });
          //const td = document.createElement("td");
          //td.textContent = "âœ”";
          //tr.appendChild(td);
          body.appendChild(tr);
        });
      }
    }
    
    function renderDBTable() {
      const type = document.getElementById("dbSelect").value;
      const data = dbMock[type];
      const head = document.getElementById("dbHead");
      const body = document.getElementById("dbTable");
      renderTable(data, type, head, body, true);
    }

    function refreshBrowser() {
      const feTitle = document.getElementById("fe_title").value;
      const feCaption = document.getElementById("fe_caption").value;
      const feApi = document.getElementById("fe_api").value;
      const apiMap = {};
      for (let i = 1; i < 5; i++) {
		const apiPath = document.getElementById("apiInput" + i).value;
		const apiData = document.getElementById("apiSelect" + i).value;
		if (apiPath && apiPath !== '') {
			apiMap[apiPath] = apiData;
		}
      }
      const searchedData = apiMap[feApi] || null;
      const data = dbMock[searchedData] || [];

	  let isTable = false;
      let result = "";
      if (typeof data === 'object' && !Array.isArray(data)) {
        for (let key in data) {
          result += `<p><strong>${key}:</strong> ${data[key]}</p>`;
        }
      } else if (Array.isArray(data) && data.length > 0) {
		result = `<table>
			<thead id="browserHead"></thead>
			<tbody id="browserTable"></tbody>
		  </table>`;
		  isTable = true;
      } else {
        result = `<p>ì¡°íšŒëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤</p>`;
      }

      document.getElementById("output").innerHTML = `
        <h2>${feTitle}</h2>
        <h4>${feCaption}</h4>
        ${result}
      `;
      
      if (isTable === true) {
		  const head = document.getElementById("browserHead");
		  const body = document.getElementById("browserTable");
		renderTable(data, searchedData, head, body);
      }
      
    }

    window.onload = renderDBTable;
  </script>
</body>
</html>
